


<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    
    <title>Expression Builder</title>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    
    <link rel="stylesheet" href="./modules/mathquill-0.10.1/mathquill.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="./modules/mathquill-0.10.1//mathquill.js"></script>
	  
    <link rel="stylesheet" href="./modules/styles/styles.css" />

    <style>
        #problemo {
            position: absolute;
            top: 50%;
            left: 50%;
            -ms-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
	    }
	#problem {
	    height: 100px;
  	    width: 500px; 
	    padding: 50px 0;
	    }

    </style>

    <py-env>
      - matplotlib
      - numpy
      - paths:
        - modules/class_Expression.py
    </py-env>
	  
    <script>
      var MQ = MathQuill.getInterface(2);
    </script>
	  

  </head>
  <body >
    <h1>RENDER EXPRESSION</h1>
    <h4 id='date'>date here</h4>

    <div style="position: absolute;  right: 0px; margin: 30px;" width="100" >
	    <p><button type="button" id="new-expression-btn">New Expression</button></p>
	    <p></br></p>
	    <button type="button" id="add-btn">Add/Subtract</button></br>
	    <button type="button" id="multiply-btn">Multiply</button></br>
	    <button type="button" id="divide-btn">Divide</button></br>
            <p></br></p>
	    <p><label for="factor-input">By:</label></br>
            <input type="text" id="factor-input" placeholder="2x" /></p>
            <p></br></p>
	    <button type="button" id="show-btn">Show Expression</button></br>
	    <p id="print-tree">pre-wassup</p>
    </div>


	<p id="problemo" onmouseup="jspaste()" ><span id="problem" contenteditable="false">\frac{(x+2)}{y}</span></p>




	<script>
	  exp = [[0,"x",,],[2, "+", 0,1],[1,"2",,],[4, "*", 2,3],[3,"y",,]];
	  exp_result="";
	  exp_latex="";
	  var selectedNodes=[];
	  let problemSpan = document.getElementById('problem');
	  let answerMathField = MQ.MathField(problemSpan);
		
	  function set_answerMathField(text) {
		  text=text.replace("'","");
		  text=text.replace("'","");

		  answerMathField.select();
		  answerMathField.clearSelection();
		  answerMathField.latex(text);
	  }
		
	  function get_exp1(obj) {
		  
		  objString=obj.toString();
		  arraystart=objString.indexOf("[[");
		  arrayend=objString.indexOf("]]");
		  objString=objString.substring(arraystart+1,arrayend+1).replaceAll("None","undefined");
		  eval("exp1=[" + objString + "]");
		  for (x1 in exp1) {
			  x1[0]=parseInt(x1[0]);
		  }
		  exp=exp1;
		  alert("wxp="+exp);
		}
	    
	   function get_printTree(obj) {
		  objString=obj.toString(); 
		  exp_result=objString.substring(objString.indexOf("['")+2,objString.indexOf("',"));
		  exp_latex=objString.substring(objString.indexOf(", '")+3,objString.indexOf("']"));

	   	}
		
	     function firstEl(arr) {
		    return arr[0];
	        }
		
	   function find_pointer(index) {
		  i=0;
		  while (exp[i][0]!=index) { i++;}
		  return i
		}
	    

	   function jspaste() {
		
		selectedNodes=[];
		    
	      	selection = document.getSelection();
	      	selectionString=selection.toString();
		answerMathField.typedText("#");



	      	selectionString1 = answerMathField.latex().toString().substring(0,answerMathField.latex().toString().indexOf("#"));
		selectionString2 = answerMathField.latex().toString().substring(answerMathField.latex().toString().indexOf("#")+1,answerMathField.latex().toString().length);   
		

		    

		   
		answerMathField.latex(selectionString1+"\\textcolor{red}{"+selectionString+"}"+selectionString2);
		
		exp_result1=exp_result.replaceAll("(","");
		exp_result1=exp_result1.replaceAll(")","");
		exp_result1=exp_result1.replaceAll("!","");
		
		position=selectionString1.search("frac");

		if (position>-1) {
			selectionString1=selectionString1.substring(0,position-1)+"*"+selectionString1.substring(position+4);
			if (selectionString1.search("}{")>-1) {
				selectionString1=selectionString1.replace("}{","/");
			} else {
				selectionString=selectionString.replace("}{","/");
			}
			position=selectionString1.search("frac");
		}   
		selectionString1=selectionString1.replaceAll("{","");
		selectionString1=selectionString1.replaceAll("}","");
		selectionString1=selectionString1.replaceAll("\textcolor","");
		selectionString1=selectionString1.replaceAll("red","");
		selectionString1=selectionString1.replaceAll("\left","");
		selectionString1=selectionString1.replaceAll("\right","");
		
		
		position=selectionString.search("frac");

		if (position>-1) {
			selectionString=selectionString.substring(0,position-1)+"*"+selectionString.substring(position+4);
			selectionString=selectionString.replace("}{","/");
			position=selectionString.search("frac");
		}
		selectionString=selectionString.replaceAll("{","");
		selectionString=selectionString.replaceAll("}","");
		selectionString=selectionString.replaceAll("\textcolor","");
		selectionString=selectionString.replaceAll("red","");
		selectionString=selectionString.replaceAll("\left","");
		selectionString=selectionString.replaceAll("\right","");

		
		

		selectionStringNo=1;
		    
		n=exp_result1.indexOf("]");
	
		while (n>-1 && selectionStringNo==1) {

			operand=exp_result1[n+1];
			while ((exp_result1[n+2]>='0' && exp_result1[n+2]<='9') || (exp_result1[n+2]=='-') || (exp_result1[n+2]>='a' && exp_result1[n+2]<='z')) {
				operand+=exp_result1[n+2];
				n+=1;
			}

			
			if (selectionString1.indexOf(operand)>=0 || (operand=='+' && selectionString1.indexOf('-')>=0)  || (operand=='*' && selectionString1.indexOf('/')>=0)) {
				i=selectionString1.indexOf(operand);
				if  (operand=='+' && selectionString1.indexOf('-')>=0  && selectionString1.indexOf('-')<selectionString1.indexOf('+')) {i=selectionString1.indexOf('-')-1;}
				if  (operand=='*' && selectionString1.indexOf('/')>=0  && (selectionString1.indexOf('*')>selectionString1.indexOf('/') || selectionString1.indexOf('*')==-1 )) {i=selectionString1.indexOf('/')-1;}
				
				exp_result1=exp_result1.substring(n+2);
				selectionString1=selectionString1.substring(i+operand.length);

			}
			else {

				selectionStringNo=0;
			}
			

			n=exp_result1.indexOf("]");

		}


		n=exp_result1.indexOf("]");

		while (n>-1 && selectionStringNo==0) {

			index=parseInt(exp_result1.substring(exp_result1.substring(0,n).lastIndexOf("[")+1 ,n));

			operand=exp_result1[n+1];
			while ((exp_result1[n+2]>='0' && exp_result1[n+2]<='9') || (exp_result1[n+2]=='-') || (exp_result1[n+2]>='a' && exp_result1[n+2]<='z')) {
				operand+=exp_result1[n+2];
				n+=1;
			}

			if (selectionString.indexOf(operand)>=0 || (operand=='+' && selectionString.indexOf('-')>=0)  || (operand=='*' && selectionString.indexOf('/')>=0)) {
				i=selectionString.indexOf(operand);
				if  (operand=='+' && selectionString.indexOf('-')>=0 && selectionString.indexOf('-')<selectionString.indexOf('+') ) {i=selectionString.indexOf('-')-1;}
				if  (operand=='*' && selectionString.indexOf('/')>=0  && (selectionString.indexOf('*')>selectionString.indexOf('/') || selectionString.indexOf('*')==-1 )) {i=selectionString.indexOf('/')-1;}
				selectedNodes.push(index);
				selectionString=selectionString.substring(i+operand.length);
			} else {selectionStringNo=2;}
			
			exp_result1=exp_result1.substring(n+2);
			n=exp_result1.indexOf("]");

		}

		trimSelectedNodes();

	      }
		
		
	 function findtops() {

		var p=parseInt(exp[0][0]);
		while (exp.map(firstEl).includes(p) && find_parent(p)<998) {
		  p=find_parent(p);
		}
		exptop=p;
		selectedtop=exptop;

		parents=[];
		for (x1 in selectedNodes) {
			if (selectedNodes[x1]<998) {
				p=selectedNodes[x1];
				parents.push([parseInt(p)]);
				while(find_parent(p)<998) {
					p=find_parent(p);
					parents[parents.length-1].push(parseInt(p));
				}
			}
		}


		function containsSelectedtop(value, index, array) {

			return value.includes(parseInt(selectedtop));
		}

		n=1;
		if (parents.length>0) {

			while (n < parents[0].length) {
				n=n+1;
				selectedtop=parseInt(parents[0][parents[0].length-n]);

				if (!parents.every(containsSelectedtop)) {
					selectedtop=parseInt(parents[0][parents[0].length-n+1]);
					n=parents[0].length+1;
				}
			}


		}
		return [selectedtop,exptop];
	    }


	function find_parent(index) {
	  p_prime=999;
	  for (x in exp) {
	    if (exp[x][2]!=undefined && exp[x][3]!=undefined && exp[x][2].toString()!="NaN" && exp[x][3].toString()!="NaN") {
		if(exp[x][2]==index || exp[x][3]==index) {p_prime=parseInt(exp[x][0]);}
	    }
	  }
	  return p_prime;
	}
		
		
	   function find_leaf() {
		    for (let index=selectedNodes.length-1; index>-1;index--) {
			if (selectedNodes[index] < 998 && exp[find_pointer(selectedNodes[index])][2] == undefined ) {
				return selectedNodes[index];
				break;
			}
		    }

	    }
		
		
	function find_operators() {
	    operators="";
	    operators1="";
	    var p=0;
	    for (let index=selectedNodes.length-1; index>-1;index--) {
		if (selectedNodes[index] < 998 && (exp[find_pointer(selectedNodes[index])][2] == undefined || exp[find_pointer(selectedNodes[index])][2].toString()=="NaN") ) {
			p=selectedNodes[index];

			while (find_parent(p) < 998  && p!=findtops()[0] ) {

				if (selectedNodes.includes(p)) {
					p=find_parent(p);
					operators=operators+exp[find_pointer(p)][1];
				} else {
					p=find_parent(p);
					operators1=operators1+exp[find_pointer(p)][1];
				}
			}
		}
	    }
	    operatorsSet=new Set(operators.split(""));
	    text="";
	    operatorsSet.forEach(function(value) {text += value;});

	    operatorsSet=new Set((operators+operators1).split(""));
	    text1="";
	    operatorsSet.forEach(function(value) {text1 += value;});

	    return [text,text1];
	}

		
		
	function trimSelectedNodes() {
	

	     //reduce to leaf nodes or completely selected subtrees
		  toRemove=[];
		  for (x1 in selectedNodes) {

		    y=selectedNodes[x1];

		    include=true;
		    if(y!=999 && y!=998 && (exp[find_pointer(y)][1]=='*' || exp[find_pointer(y)][1]=='+' || exp[find_pointer(y)][1]=='/')) {

		       var p=parseInt(exp[find_pointer(y)][2]);

		       while(include && p!=y && find_parent(p)!=999) {

		    if (!selectedNodes.includes(p) ) {include=false; }

		    else if (selectedNodes.includes(p) && exp[find_pointer(p)][2]!=undefined && exp[find_pointer(p)][2].toString()!="NaN") {p=exp[find_pointer(p)][2]; }
		    else if (parseInt(exp[find_pointer(find_parent(p))][2])==p && selectedNodes.includes(find_parent(p) ))  {p=exp[find_pointer(find_parent(p))][3]; }
		    else {
		    while (find_parent(p)!=999 && exp[find_pointer(find_parent(p))][2]!=p && p!=y) {p=find_parent(p); }
		    if (p!=y && find_parent(p)!=999 && p!=exp[find_pointer(find_parent(p))][3] && selectedNodes.includes(find_parent(p))) {p=exp[find_pointer(find_parent(p))][3]; }
		    else if (p!=y && find_parent(p)!=999) {p=find_parent(p); }
		    }
		       }
		    }
		    if (!include) {
			toRemove.push(x1);
		    }
		  }

		  newSelectedNodes=[];

		  for (x1 in selectedNodes) {
		    if (!toRemove.includes(x1)) {
			newSelectedNodes.push(parseInt(selectedNodes[x1]));
		    }
		  }

		  selectedNodes=newSelectedNodes;

	   //if there are any + nodes in containing tree and an incompletely selected multiplication unit, eliminate highest leaf and retry
		function countleafs(item) {
			if (item<998) {
				if (exp[find_pointer(item)][2]==undefined || exp[find_pointer(item)][2].toString()=="NaN") {
					leafcount++;
				}
			}
		}



		retry=false;
		finished=false;
		selectedtop=findtops()[0];

		exptop=findtops()[1];
		incompleteunit=false;
		for (x1 in selectedNodes) {
			if (selectedNodes[x1] < 998) {
				p=selectedNodes[x1];
				while (find_parent(p) < 998 && p!=selectedtop) {
					p=find_parent(p);
					if (exp[find_pointer(p)][1]=='*' && !selectedNodes.includes(p)) {incompleteunit=true;}
				}
			}
		}

		p=selectedtop;
		leafcount=0;
		selectedNodes.forEach(countleafs);
		while (!retry && !finished && leafcount > 1 && incompleteunit) {


			if (!selectedNodes.includes(p) && exp[find_pointer(p)][1]=='+') {
				retry=true;
			} else if (exp[find_pointer(p)][2]!=undefined && exp[find_pointer(p)][2].toString()!="NaN") {
				p=parseInt(exp[find_pointer(p)][2]);
			} else if ((exp[find_pointer(p)][2]==undefined || exp[find_pointer(p)][2].toString()=="NaN") && exp[find_pointer(find_parent(p))][2]==p) {
				p=parseInt(exp[find_pointer(find_parent(p))][3]);
			} else if ((exp[find_pointer(p)][2]==undefined || exp[find_pointer(p)][2].toString()=="NaN") && parseInt(exp[find_pointer(find_parent(p))][3])==p) {
				while (find_parent(p)!=selectedtop && find_parent(p)!=999 && find_parent(p)!=exptop) {p=find_parent(p);}
				if (parseInt(exp[find_pointer(find_parent(p))][3])==p) {finished=true;}
				else {p=parseInt(exp[find_pointer(find_parent(p))][3]);}
			}
		}
		if (retry) {

			removed=false;
			n=selectedNodes.length-1;
			while(!removed && n >= 0) {
				if (selectedNodes[n] < 998) {
					if (exp[find_pointer(selectedNodes[n])][2] == undefined || exp[find_pointer(selectedNodes[n])][2].toString() == "NaN") {
						selectedNodes.splice(n,1);
						removed = true;
					}
					else {n--;}
				} else {n--;}
			}
			trimSelectedNodes();
		} 


	} 
		
	</script>



	<script async src="./modules/index.js"></script>

	<py-script>
		
		import class_Expression as cex
		from pyodide import create_proxy, to_js
		import js
		import numpy as np
		import re

		numpart=0
		strpart=""
		exp_py=cex.Expression()


		exp_py.add_branch('+','x')
		exp_py.add_branch('+','2')
		exp_py.add_branch('/','y') 
		document.getElementById("factor-input").value=exp_py.print_tree('l')
		

		def show_expression(event):
			txt=document.getElementById("factor-input").value
			js.set_answerMathField(create_proxy(txt))
		
		def push_vars(event):
			js.get_exp1(create_proxy(exp_py.elements))
			js.get_printTree(create_proxy([exp_py.print_tree('r'), exp_py.print_tree('l')]))
		
		def parseFactor():
			document.getElementById("print-tree").innerHTML="parseFactor"
			global numpart
			global strpart

			numpart=0;
			strpart="";
			expString=js.document.getElementById("factor-input").value
			if not(re.search("^-?[0-9]*[a-z]*$", expString)):
				raise ValueError("your expression must be in the form (-)(number)(lowercase letters)")
			for i in range(0, len(expString)):
				if expString[i].isdigit():
					numpart=int(expString[0:i+1])
					strpart=expString[i+1:]
			if numpart==0 and strpart=="":
				strpart=expString
		
		def treeFactor(numpart, strpart):
			exp_sub=cex.Expression()

			if numpart>0:
				exp_sub.add_branch('+',str(numpart))
			elif numpart<0:
				exp_sub.add_branch('-',str(-1*numpart))
			elif strpart[0]=='-':
				exp_sub.add_branch('-', '1')
				strpart=strpart[1:]
			else:
				exp_sub.add_branch('+',strpart[0])
				strpart=strpart[1:]
			while len(strpart)>0:
				exp_sub.add_branch('*',strpart[0])
				strpart=strpart[1:]
			return exp_sub
			
		
		def add_exp(event):
			global numpart
			global strpart
			global exp_py
			try:
				parseFactor()
			except:
				document.getElementById("print-tree").innerHTML="your expression must be in the form (-)(number)(lowercase letters)"
			else:
				document.getElementById("print-tree").innerHTML=str(numpart)+","+strpart
				tops=js.findtops()
				selectedtop=tops[0]
				exptop=tops[1]
				document.getElementById("print-tree").innerHTML=str(exptop)+","+str(selectedtop)

				if selectedtop==exptop or selectedtop==999:
					exp_insert=treeFactor(numpart, strpart)

					if len(exp_insert.elements)==1:
						exp_py.add_branch('+', exp_insert.elements[0][1])
					else:
						maxindex=exp_py.elements[:,0].max()
						for x1 in exp_insert.elements:
							x1[0]=x1[0]+1+maxindex
							if x1[2]!=None:
								x1[2]=x1[2]+1+maxindex
								x1[3]=x1[3]+1+maxindex
						maxinsindex=exp_insert.elements[:,0].max()
						oldelements=exp_py.elements
						exp_py.elements=np.concatenate((oldelements, [[maxinsindex+1, '+', int(maxindex), int(maxinsindex)]], exp_insert.elements), axis=0)
						#document.getElementById("print-tree").innerHTML= str(exp_insert.elements)+";"+ str(exp_py.elements)
				else:
					leafnode=js.find_leaf()
					operators=js.find_operators()[0]
					document.getElementById("print-tree").innerHTML=operators
					exp_insert=treeFactor(numpart, strpart)

					minindex_py=int(exp_py.elements[:,0].min())
					maxindex_insert=int(exp_insert.elements[:,0].max())

					if operators=='+' or operators=='':
						for x1 in exp_insert.elements:
							x1[0]=x1[0]-maxindex_insert-1+minindex_py
							if x1[2] is not None:
								x1[2]=x1[2]-maxindex_insert-1+minindex_py
								x1[3]=x1[3]-maxindex_insert-1+minindex_py
						minindex_insert=int(exp_insert.elements[:,0].min())
						maxindex_insert=int(exp_insert.elements[:,0].max())

						newleaf=[int(minindex_insert-1),exp_py.elements[exp_py.find_pointer(leafnode)][1],None,None]
						exp_py.elements[exp_py.find_pointer(leafnode)][1]='+'
						exp_py.elements[exp_py.find_pointer(leafnode)][2]=minindex_insert-1
						exp_py.elements[exp_py.find_pointer(leafnode)][3]=minindex_py-1
						oldtree=exp_py
						exp_py.elements=np.concatenate((oldtree.elements,[newleaf],exp_insert.elements), axis=0)

					elif operators=='*+' or operators=='+*' or operators=='*':

						for x1 in exp_insert.elements:
							x1[0]=x1[0]-maxindex_insert-2+minindex_py
							if x1[2] is not None:
								x1[2]=x1[2]-maxindex_insert-2+minindex_py
								x1[3]=x1[3]-maxindex_insert-2+minindex_py
						minindex_insert=int(exp_insert.elements[:,0].min())
						maxindex_insert=int(exp_insert.elements[:,0].max())

						pp=js.find_parent(selectedtop)
						document.getElementById("factor-input").value=str(selectedtop)+","+str(pp)+","+str(minindex_py)

						if exp_py.elements[exp_py.find_pointer(pp)][2]==selectedtop:
							exp_py.elements[exp_py.find_pointer(pp)][2]=minindex_py-1
							if exp_py.elements[exp_py.find_pointer(pp)][1]=='/':
								exp_py.elements[exp_py.find_pointer(pp)][3]=minindex_py-1
						else:
							exp_py.elements[exp_py.find_pointer(pp)][3]=minindex_py-1
							if exp_py.elements[exp_py.find_pointer(pp)][1]=='/':
								exp_py.elements[exp_py.find_pointer(pp)][2]=minindex_py-1

						newnode=[int(minindex_py-1), '+', selectedtop, minindex_py-2]
						oldtree=exp_py
						exp_py.elements=np.concatenate((oldtree.elements,[newnode],exp_insert.elements), axis=0)


				for x1 in exp_py.elements:
					x1[0]=int(x1[0])
					if x1[2] is not None:
						x1[2]=int(x1[2])
						x1[3]=int(x1[3])
				js.get_exp1(create_proxy(exp_py.elements))
				js.get_printTree(create_proxy([exp_py.print_tree('r'), exp_py.print_tree('l')]))
				js.set_answerMathField(create_proxy( exp_py.print_tree('l')))
				#document.getElementById("print-tree").innerHTML=""
		
		def multiply_exp(event):
			global numpart
			global strpart
			global exp_py
			try:
				parseFactor()
			except:
				document.getElementById("print-tree").innerHTML="your expression must be in the form (-)(number)(lowercase letters)"
			else:
				document.getElementById("print-tree").innerHTML=str(numpart)+","+strpart
				tops=js.findtops()
				selectedtop=tops[0]
				exptop=tops[1]
				document.getElementById("print-tree").innerHTML=str(exptop)+","+str(selectedtop)

				if selectedtop==exptop or selectedtop==999:
					exp_insert=treeFactor(numpart, strpart)

					if len(exp_insert.elements)==1:
						exp_py.add_branch('*', exp_insert.elements[0][1])
					else:
						maxindex=exp_py.elements[:,0].max()
						for x1 in exp_insert.elements:
							x1[0]=x1[0]+1+maxindex
							if x1[2]!=None:
								x1[2]=x1[2]+1+maxindex
								x1[3]=x1[3]+1+maxindex
						maxinsindex=exp_insert.elements[:,0].max()
						oldelements=exp_py.elements
						exp_py.elements=np.concatenate((oldelements, [[maxinsindex+1, '*', int(maxindex), int(maxinsindex)]], exp_insert.elements), axis=0)
						#document.getElementById("print-tree").innerHTML= str(exp_insert.elements)+";"+ str(exp_py.elements)
				else:
					operators=js.find_operators()[0]
					document.getElementById("print-tree").innerHTML=operators
					exp_insert=treeFactor(numpart, strpart)

					minindex_py=int(exp_py.elements[:,0].min())
					maxindex_insert=int(exp_insert.elements[:,0].max())

					for x1 in exp_insert.elements:
						x1[0]=x1[0]-maxindex_insert-2+minindex_py
						if x1[2] is not None:
							x1[2]=x1[2]-maxindex_insert-2+minindex_py
							x1[3]=x1[3]-maxindex_insert-2+minindex_py
					minindex_insert=int(exp_insert.elements[:,0].min())
					maxindex_insert=int(exp_insert.elements[:,0].max())

					pp=js.find_parent(selectedtop)
					document.getElementById("factor-input").value=str(selectedtop)+","+str(pp)+","+str(minindex_py)

					if exp_py.elements[exp_py.find_pointer(pp)][2]==selectedtop:
						exp_py.elements[exp_py.find_pointer(pp)][2]=minindex_py-1
						if exp_py.elements[exp_py.find_pointer(pp)][1]=='/':
							exp_py.elements[exp_py.find_pointer(pp)][3]=minindex_py-1
					else:
						exp_py.elements[exp_py.find_pointer(pp)][3]=minindex_py-1
						if exp_py.elements[exp_py.find_pointer(pp)][1]=='/':
							exp_py.elements[exp_py.find_pointer(pp)][2]=minindex_py-1

					newnode=[int(minindex_py-1), '*', selectedtop, minindex_py-2]
					oldtree=exp_py
					exp_py.elements=np.concatenate((oldtree.elements,[newnode],exp_insert.elements), axis=0)
			
			for x1 in exp_py.elements:
				x1[0]=int(x1[0])
				if x1[2] is not None:
					x1[2]=int(x1[2])
					x1[3]=int(x1[3])
			document.getElementById("print-tree").innerHTML=exp_py.print_tree('l')
			js.get_exp1(create_proxy(exp_py.elements))
			js.get_printTree(create_proxy([exp_py.print_tree('r'), exp_py.print_tree('l')]))
			js.set_answerMathField(create_proxy( exp_py.print_tree('l')))
			


		js.document.getElementById("new-expression-btn").addEventListener("click", create_proxy(show_expression))
		js.document.getElementById("new-expression-btn").addEventListener("click", create_proxy(push_vars))
		js.document.getElementById("add-btn").addEventListener("click", create_proxy(add_exp))
		js.document.getElementById("multiply-btn").addEventListener("click", create_proxy(multiply_exp))

	</py-script>


  </body>

</html>
