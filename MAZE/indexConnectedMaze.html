

<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles/styles.css" />
    <script async src="./javascript/index.js"></script>
    <script async src="./javascript/two.min.js"></script>
    <style>
td {
	width: 65px;
	height: 65px;
	font-size: 340%;
	text-align: center;
	border-style: solid;
	margin: 0px;
	border-width: 5px;
	background-color: White;
    color: White;
}
img {
    width: 240px;
    height: 120px;
}
td.plyer {
	border-color: LightGray;
}
td.plyer1 {
	border-top-color: Black;
}
td.plyer2 {
	border-right-color: Black;
}
td.plyer3 {
	border-bottom-color: Black;
}
td.plyer4 {
	border-left-color: Black;
}
td.hilght {
	background-color: Orange;
}
table {
    width: 50%;
	display: inline-block;
	margin: 40px;
	border-collapse: collapse;
}
div.playerInfo {
	position: relative;
	float: left;
	left: 80px;
}
div.clock {
	position: relative;
	float: right;
	right: 80px;
}
ul {
	font-size: 340%;
}
li#p1 {
	color: Green;
}
li#p2 {
	color: Red;
}
li#p3 {
	color: Blue;
}
li#p4 {
	color: Orange;
}
li.active {
	border-style: solid;
	border-color: Red;
	border-width: 5px;
}

  </style>
    
    <title>Random Walk</title>
  </head>
  <body >
    <h1>MAZE</h1>
    <h4 id='date'></h4>
    
    <div>
        <button type="button" onclick="fullMaze()">Random Maze</button>
        <button type="button" onclick="setInterval(nextRolls, 500)">Clock Maze</button>
        <button type="button" onclick="setupMaze(rolls, 5, 5)">Hardcoded Maze</button>
        <button type="button" onclick="alert(testPartition())">Test Partition</button>
        <button type="button" onclick="alert(rolls)">Path</button>
    </div>

    <table>
	<tr>
    		<td class="plyer" id="P_A1"  ></td>
    		<td class="plyer" id="P_A2"  ></td>
    		<td class="plyer" id="P_A3"  ></td>
		<td class="plyer" id="P_A4"  ></td>
    		<td class="plyer" id="P_A5"  ></td>
    		<td class="plyer" id="P_A6" ></td>
		<td class="plyer" id="P_A7"  ></td>
    		<td class="plyer" id="P_A8"  ></td>
		<td class="plyer" id="P_A9"  ></td>
    		<td class="plyer" id="P_A0"  ></td>
 	  </tr>
  	  <tr>
    		<td class="plyer" id="P_B1"  ></td>
    		<td class="plyer" id="P_B2"  ></td>
    		<td class="plyer" id="P_B3"  ></td>
		<td class="plyer" id="P_B4"  ></td>
    		<td class="plyer" id="P_B5"  ></td>
    		<td class="plyer" id="P_B6"  ></td>
		<td class="plyer" id="P_B7"  ></td>
    		<td class="plyer" id="P_B8"  ></td>
		<td class="plyer" id="P_B9"  ></td>
    		<td class="plyer" id="P_B0"  ></td>
  	  </tr>
  	  <tr>
    		<td class="plyer" id="P_C1"   ></td>
    		<td class="plyer" id="P_C2"  ></td>
    		<td class="plyer" id="P_C3"  ></td>
		<td class="plyer" id="P_C4"  ></td>
    		<td class="plyer" id="P_C5"  ></td>
    		<td class="plyer" id="P_C6"  ></td>
		<td class="plyer" id="P_C7"  ></td>
    		<td class="plyer" id="P_C8"  ></td>
		<td class="plyer" id="P_C9"  ></td>
    		<td class="plyer" id="P_C0"  ></td>
  	   </tr>
	   <tr>
    		<td class="plyer" id="P_D1"   ></td>
    		<td class="plyer" id="P_D2"  ></td>
    		<td class="plyer" id="P_D3"  ></td>
		<td class="plyer" id="P_D4"  ></td>
    		<td class="plyer" id="P_D5"  ></td>
    		<td class="plyer"id="P_D6"  ></td>
		<td class="plyer" id="P_D7"  ></td>
    		<td class="plyer" id="P_D8"  ></td>
		<td class="plyer" id="P_D9"  ></td>
    		<td class="plyer" id="P_D0"  ></td>
  	  </tr>
  	  <tr>
    		<td class="plyer" id="P_E1"   ></td>
    		<td class="plyer" id="P_E2"  ></td>
    		<td class="plyer" id="P_E3"  ></td>
		<td class="plyer" id="P_E4"  ></td>
    		<td class="plyer" id="P_E5"  onclick="alertDirections()"></td>
    		<td class="plyer" id="P_E6"  ></td>
		<td class="plyer" id="P_E7"  ></td>
    		<td class="plyer" id="P_E8"  ></td>
		<td class="plyer" id="P_E9"  ></td>
    		<td class="plyer" id="P_E0"  ></td>
  	   </tr>
	   <tr>
    		<td class="plyer" id="P_F1"   ></td>
    		<td class="plyer"id="P_F2"  ></td>
    		<td class="plyer" id="P_F3"  ></td>
		<td class="plyer" id="P_F4"  ></td>
    		<td class="plyer" id="P_F5"  ></td>
    		<td class="plyer" id="P_F6"  ></td>
		<td class="plyer" id="P_F7"  ></td>
    		<td class="plyer" id="P_F8"  ></td>
		<td class="plyer" id="P_F9"  ></td>
    		<td class="plyer" id="P_F0"  ></td>
  	   </tr>
	   <tr>
    		<td class="plyer" id="P_G1"   ></td>
    		<td class="plyer" id="P_G2"  ></td>
    		<td class="plyer" id="P_G3"  ></td>
		<td class="plyer" id="P_G4"  ></td>
    		<td class="plyer" id="P_G5"  ></td>
    		<td class="plyer" id="P_G6"  ></td>
		<td class="plyer" id="P_G7"  ></td>
    		<td class="plyer" id="P_G8"  ></td>
		<td class="plyer" id="P_G9"  ></td>
    		<td class="plyer" id="P_G0"  ></td>
  	   </tr>
	   <tr>
    		<td class="plyer" id="P_H1"   ></td>
    		<td class="plyer" id="P_H2"  ></td>
    		<td class="plyer" id="P_H3"  ></td>
		<td class="plyer" id="P_H4"  ></td>
    		<td class="plyer" id="P_H5"  ></td>
    		<td class="plyer" id="P_H6"  ></td>
		<td class="plyer" id="P_H7"  ></td>
    		<td class="plyer" id="P_H8"  ></td>
		<td class="plyer" id="P_H9"  ></td>
    		<td class="plyer" id="P_H0"  ></td>
  	   </tr>
	   <tr>
    		<td class="plyer" id="P_I1"   ></td>
    		<td class="plyer" id="P_I2"  ></td>
    		<td class="plyer" id="P_I3"  ></td>
		<td class="plyer" id="P_I4"  ></td>
    		<td class="plyer" id="P_I5"  ></td>
    		<td class="plyer" id="P_I6"  ></td>
		<td class="plyer" id="P_I7"  ></td>
    		<td class="plyer" id="P_I8"  ></td>
		<td class="plyer" id="P_I9"  ></td>
    		<td class="plyer" id="P_I0"  ></td>
  	   </tr>
	   <tr>
    		<td class="plyer" id="P_J1"   ></td>
    		<td class="plyer" id="P_J2"  ></td>
    		<td class="plyer" id="P_J3"  ></td>
		<td class="plyer" id="P_J4"  ></td>
    		<td class="plyer" id="P_J5"  ></td>
    		<td class="plyer" id="P_J6"  ></td>
		<td class="plyer" id="P_J7"  ></td>
    		<td class="plyer" id="P_J8"  ></td>
		<td class="plyer" id="P_J9"  ></td>
    		<td class="plyer" id="P_J0"  ></td>
  	   </tr>
    </table>

    <div class="clock">
        <h2>Chaos Clock</h2>
        <ul style="list-style-type:none">
            <li>
                <img src="C:\Users\ianmc\OneDrive\Pictures\Saved pictures\clock0000.png">
            </li>
            <li>
                <img src="C:\Users\ianmc\OneDrive\Pictures\Saved pictures\clock0100.png">
            </li>
            <li>
                <img src="C:\Users\ianmc\OneDrive\Pictures\Saved pictures\clock0200.png">
            </li>
        </ul>
    </div>

    <p  id="rolls"></p>

    <script >

      let bible = [];
      let path = [];
      let directions=[];
      let bestfootforward = true;
      let row=5;
      let col=5;
      rolls=[1];
      //rolls=[2,4,4,2,2,2,4,1,4,1,4,2,4,3,2,1,2];
      //[1,2,2,3,3,4,1] dead end


      function fullMaze() {
        for (x1=1; x1<=10; x1+=1) {
            for (y1=1; y1<=10; y1+=1) {
                setupRolls(10);
                setupMaze(rolls, x1, y1);
            }
        }
      }


      function setupRolls(n) {
        rolls = [];
        for (i1=0; i1<n; i1++) {
            rolls.push(Math.floor(Math.random()*4+1)); 
        }
        //document.getElementById("rolls").innerHTML=rolls;

      }

      function nextRolls() {
        setupMaze(rolls, 6, 6);
        reversed = rolls.toReversed();
        for (i1 in reversed) {
            if (reversed[i1]!=4) {
                reversed[i1]++;
                break;
            } else {
                reversed[i1]=1;
            }
        }
        if (reversed.every(function(value) {return value==1;} )) {
            reversed.push(1);
        }
        rolls = reversed.toReversed();
      }

	  function setupMaze(rolls, row, col) {


        // var squares = document.getElementsByTagName("td");
        // for (s1=0; s1<squares.length; s1++) {
        //     squares[s1].classList = ["plyer"];
        // }
        


        
        var r = row;
        var c = col;
        var corner = "tl";
        var dice = 0;

        
        var txt = findsq(r, c);
        var txtup = findsq(r-1, c);
        var txtright = findsq(r, c+1);
        var txtdown = findsq(r+1, c);
        var txtleft = findsq(r, c-1);

        function nextWall() {
            //dice=Math.floor(Math.random()*4+1); 
            dice=rolls[i1];
            loop=0;
            class1="";
            
            do {   
                //alert(dice+","+class1+","+corner);
                class1="";
                loop++;
                txt = findsq(r, c);
                txtup = findsq(r-1, c);
                txtright = findsq(r, c+1);
                txtdown = findsq(r+1, c);
                txtleft = findsq(r, c-1);
                
                if (corner=="tl") {
                    if (dice==1 && !document.getElementById(txt).classList.contains("plyer1") && !(document.getElementById(txt).classList.contains("plyer2") && document.getElementById(txt).classList.contains("plyer3") && document.getElementById(txt).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-1), "plyer1")) {
                        class1="plyer1";
                        corner="tr";
                    } else if (dice==1 ) {
                        dice=2;
                    }
                    if (dice==2 && !document.getElementById(txt).classList.contains("plyer4") && !(document.getElementById(txt).classList.contains("plyer1") && document.getElementById(txt).classList.contains("plyer2") && document.getElementById(txt).classList.contains("plyer3")) && !testPartition((r-1)*10+(c-1), "plyer4")) {
                        class1="plyer4";
                        corner="bl";
                    } else if (dice==2) {
                        dice=3;
                    }
                    if (dice==3 && txtleft!="none") {
                        if (!document.getElementById(txtleft).classList.contains("plyer1") && !(document.getElementById(txtleft).classList.contains("plyer2") && document.getElementById(txtleft).classList.contains("plyer3") && document.getElementById(txtleft).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-2), "plyer1")) {
                            c--;
                            class1="plyer1";
                        } else {
                            dice=4;
                        }
                    } else if (dice==3 ) {
                        dice=4;
                    }
                    if (dice==4 && txtup!="none") {
                        if (!document.getElementById(txtup).classList.contains("plyer4") && !(document.getElementById(txtup).classList.contains("plyer1") && document.getElementById(txtup).classList.contains("plyer2") && document.getElementById(txtup).classList.contains("plyer3")) && !testPartition((r-2)*10+(c-1), "plyer4")) {
                            r--;
                            class1="plyer4";
                        } else {
                            dice=1;
                        }
                    } else if (dice==4) {
                        dice=1;
                    }     
                } else if (corner=="tr") {
                    if (dice==1 && txtright!="none") {
                        if (!document.getElementById(txtright).classList.contains("plyer1") && !(document.getElementById(txtright).classList.contains("plyer2") && document.getElementById(txtright).classList.contains("plyer3") && document.getElementById(txtright).classList.contains("plyer4")) && !testPartition((r-1)*10+(c), "plyer1")) {
                            c++;
                            class1="plyer1";
                        } else {
                            dice=2;
                        }
                    } else if (dice==1 ) {
                        dice=2;
                    }
                    if (dice==2 && !document.getElementById(txt).classList.contains("plyer2") && !(document.getElementById(txt).classList.contains("plyer1") && document.getElementById(txt).classList.contains("plyer3") && document.getElementById(txt).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-1), "plyer2")) {
                        class1="plyer2";
                        corner="br";
                    } else if (dice==2 ) {
                        dice=3;
                    }
                    if (dice==3 && !document.getElementById(txt).classList.contains("plyer1") && !(document.getElementById(txt).classList.contains("plyer2") && document.getElementById(txt).classList.contains("plyer3") && document.getElementById(txt).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-1), "plyer1")) {
                        class1="plyer1";
                        corner="tl";
                    } else if (dice==3 ) {
                        dice=4;
                    }
                    if (dice==4 && txtup!="none") {
                        if (!document.getElementById(txtup).classList.contains("plyer2") && !(document.getElementById(txtup).classList.contains("plyer1") && document.getElementById(txtup).classList.contains("plyer3") && document.getElementById(txtup).classList.contains("plyer4")) && !testPartition((r-2)*10+(c-1), "plyer2")) {
                            r--;
                            class1="plyer2";
                        } else {
                            dice=1;
                        }
                    } else if (dice==4 ) {
                        dice=1;
                    }     
                } else if (corner=="bl") {
                    if (dice==1 && !document.getElementById(txt).classList.contains("plyer3") && !(document.getElementById(txt).classList.contains("plyer1") && document.getElementById(txt).classList.contains("plyer2") && document.getElementById(txt).classList.contains("plyer4"))  && !testPartition((r-1)*10+(c-1), "plyer3")) {
                        class1="plyer3";
                        corner="br";
                    } else if (dice==1 ) {
                        dice=2;
                    }

                    if (dice==2 && txtdown!="none") {
                        if (!document.getElementById(txtdown).classList.contains("plyer4") && !(document.getElementById(txtdown).classList.contains("plyer1") && document.getElementById(txtdown).classList.contains("plyer2") && document.getElementById(txtdown).classList.contains("plyer3")) && !testPartition((r)*10+(c-1), "plyer4")) {
                            r++;
                            class1="plyer4";
                        } else {
                            dice=3;
                        }
                    } else if (dice==2 ) {
                        dice=3;
                    }
                    if (dice==3 && txtleft!="none") {
                        if (!document.getElementById(txtleft).classList.contains("plyer3") && !(document.getElementById(txtleft).classList.contains("plyer1") && document.getElementById(txtleft).classList.contains("plyer2") && document.getElementById(txtleft).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-2), "plyer3")) {
                            c--;
                            class1="plyer3";
                        } else {
                            dice=4;
                        }
                    } else if (dice==3 ) {
                        dice=4;
                    }
                    if (dice==4 && !document.getElementById(txt).classList.contains("plyer4") && !(document.getElementById(txt).classList.contains("plyer1") && document.getElementById(txt).classList.contains("plyer2") && document.getElementById(txt).classList.contains("plyer3")) && !testPartition((r-1)*10+(c-1), "plyer4")) {
                        class1="plyer4";
                        corner="tl";
                    } else if (dice==4) {
                        dice=1;
                    }   
                } else if (corner=="br") {
                    if (dice==1 && txtright!="none") {
                        if (!document.getElementById(txtright).classList.contains("plyer3") && !(document.getElementById(txtright).classList.contains("plyer1") && document.getElementById(txtright).classList.contains("plyer2") && document.getElementById(txtright).classList.contains("plyer4")) && !testPartition((r-1)*10+(c), "plyer3")) {
                            c++;
                            class1="plyer3";
                        } else {
                            dice=2;
                        }

                    } else if (dice==1) {
                        dice=2;
                    }
                    if (dice==2 && txtdown!="none") {
                        if (!document.getElementById(txtdown).classList.contains("plyer2") && !(document.getElementById(txtdown).classList.contains("plyer1") && document.getElementById(txtdown).classList.contains("plyer3") && document.getElementById(txtdown).classList.contains("plyer4")) && !testPartition((r)*10+(c-1), "plyer2")) {
                            r++;
                            class1="plyer2";
                        } else {
                            dice=3;
                        }
                    } else if (dice==2 ) {
                        dice=3;
                    }
                    if (dice==3 && !document.getElementById(txt).classList.contains("plyer3") && !(document.getElementById(txt).classList.contains("plyer1") && document.getElementById(txt).classList.contains("plyer2") && document.getElementById(txt).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-1), "plyer3")) {
                        class1="plyer3";
                        corner="bl";
                    } else if (dice==3 ) {
                        dice=4;
                    } 
                    if (dice==4 && !document.getElementById(txt).classList.contains("plyer2") && !(document.getElementById(txt).classList.contains("plyer1") && document.getElementById(txt).classList.contains("plyer3") && document.getElementById(txt).classList.contains("plyer4")) && !testPartition((r-1)*10+(c-1), "plyer2")) {
                        class1="plyer2";
                        corner="tr";
                    } else if (dice==4 ) {
                        dice=1;
                    }   
                }
                //alert(dice+","+class1+","+corner);
            } while (class1=="" && loop<3)
            if (class1=="") {
                //alert("dead end"+dice+","+loop+","+corner);
                return false;
            }

            txt = findsq(r, c);
            txtup = findsq(r-1, c);
            txtright = findsq(r, c+1);
            txtdown = findsq(r+1, c);
            txtleft = findsq(r, c-1);

            document.getElementById(txt).classList.add(class1);

            if (class1=="plyer1" && txtup!="none" && !document.getElementById(txtup).classList.contains("plyer3")) {
                document.getElementById(txtup).classList.add("plyer3");
            }
            if (class1=="plyer2" && txtright!="none" && !document.getElementById(txtright).classList.contains("plyer4")) {
                document.getElementById(txtright).classList.add("plyer4");
            }
            if (class1=="plyer3" && txtdown!="none" && !document.getElementById(txtdown).classList.contains("plyer1")) {
                document.getElementById(txtdown).classList.add("plyer1");
            }
            if (class1=="plyer4" && txtleft!="none" && !document.getElementById(txtleft).classList.contains("plyer2")) {
                document.getElementById(txtleft).classList.add("plyer2");
            }
                
            //document.getElementById(txt).innerHTML+=dice;
            return true;
        }

        for (i1=0; i1<rolls.length; i1++) {
            cont=nextWall();
            if (!cont) {
                //alert(i1);
                break;
            }
        }                
      }
    




      function findsq(x ,y) {
        if (x<1 || y<1 || x>10 || y>10) {
            return "none";
        }
        txt = "P_";
        switch (x) {
            case 1:
                txt+="A";
                break;
            case 2:
                txt+="B";
                break;
            case 3:
                txt+="C";
                break;
            case 4:
                txt+="D";
                break;
            case 5:
                txt+="E";
                break;
            case 6:
                txt+="F";
                break;
            case 7:
                txt+="G";
                break;
            case 8:
                txt+="H";
                break;
            case 9:
                txt+="I";
                break;
            case 10:
                txt+="J";
                break;
        }
        if (y==10) {
            txt+="0";
        } else {
            txt+=y;
        }

        return txt;
      }

      function testPartition(givenindex, givenwall) {
        if (givenindex<0 || givenindex>99) {
            return false;
        }
        var r = Math.floor(givenindex/10)+1;
        var c = givenindex%10+1;
        var class1 = givenwall;
        var txt = findsq(r, c);
        var txtup = findsq(r-1, c);
        var txtright = findsq(r, c+1);
        var txtdown = findsq(r+1, c);
        var txtleft = findsq(r, c-1);

        document.getElementById(txt).classList.add(class1);

        if (class1=="plyer1" && txtup!="none" && !document.getElementById(txtup).classList.contains("plyer3")) {
            document.getElementById(txtup).classList.add("plyer3");
        }
        if (class1=="plyer2" && txtright!="none" && !document.getElementById(txtright).classList.contains("plyer4")) {
            document.getElementById(txtright).classList.add("plyer4");
        }
        if (class1=="plyer3" && txtdown!="none" && !document.getElementById(txtdown).classList.contains("plyer1")) {
            document.getElementById(txtdown).classList.add("plyer1");
        }
        if (class1=="plyer4" && txtleft!="none" && !document.getElementById(txtleft).classList.contains("plyer2")) {
            document.getElementById(txtleft).classList.add("plyer2");
        }
        
        //return false;
    
        var squares = document.getElementsByTagName("td");
        for (s1=0; s1<squares.length; s1++) {
            squares[s1].innerHTML = s1;
        }
        change=false;
        do {
            change=false;
            for (s1=0; s1<squares.length; s1++) {
                targetsq=squares[s1];
                if (s1>=10) {
                    upsq=squares[s1-10];
                } else {
                    upsq="none";
                }
                if (s1%10!=0) {
                    leftsq=squares[s1-1];
                } else {
                    leftsq="none";
                }
                if (s1%10!=9) {
                    rightsq=squares[s1+1];
                } else {
                    rightsq="none";
                }
                if (s1<90) {
                    downsq=squares[s1+10];
                } else {
                    downsq="none";
                }

                if (!targetsq.classList.contains("plyer1") && upsq!="none") {
                    if (targetsq.innerHTML!=upsq.innerHTML) {
                        change=true;
                        targetsq.innerHTML=Math.min(targetsq.innerHTML, upsq.innerHTML);
                    }
                }


                if (!targetsq.classList.contains("plyer2")  && rightsq!="none") {
                    
                    if (targetsq.innerHTML!=rightsq.innerHTML) {
                        change=true;
                        targetsq.innerHTML=Math.min(targetsq.innerHTML, rightsq.innerHTML);
                    }
                }


                if (!targetsq.classList.contains("plyer3")   && downsq!="none") {
                    if (targetsq.innerHTML!=downsq.innerHTML) {
                        change=true;
                        targetsq.innerHTML=Math.min(targetsq.innerHTML, downsq.innerHTML);
                    }
                }


                if (!targetsq.classList.contains("plyer4")  && leftsq!="none") {

                    if (targetsq.innerHTML!=leftsq.innerHTML) {
                        change=true;
                        targetsq.innerHTML=Math.min(targetsq.innerHTML, leftsq.innerHTML);
                    }
                }
                
                
            }

            

        } while(change)

        sum=0;
        for (s1=0; s1<squares.length; s1++) {
            sum+=parseInt(squares[s1].innerHTML);
        }

        document.getElementById(txt).classList.remove(class1);

        if (class1=="plyer1" && txtup!="none" && document.getElementById(txtup).classList.contains("plyer3")) {
            document.getElementById(txtup).classList.remove("plyer3");
        }
        if (class1=="plyer2" && txtright!="none" && document.getElementById(txtright).classList.contains("plyer4")) {
            document.getElementById(txtright).classList.remove("plyer4");
        }
        if (class1=="plyer3" && txtdown!="none" && document.getElementById(txtdown).classList.contains("plyer1")) {
            document.getElementById(txtdown).classList.remove("plyer1");
        }
        if (class1=="plyer4" && txtleft!="none" && document.getElementById(txtleft).classList.contains("plyer2")) {
            document.getElementById(txtleft).classList.remove("plyer2");
        }

        if (sum==0) {
            return false;
        } else {
            return true;
        }


      }


      function alertDirections() {
        x=5;
        y=5;
        
        var directions=["left","right","up","down"];
        const txt = findsq(x,y);
        const txtup = findsq(x, y-1);
        const txtright = findsq(x+1, y);
        const txtdown = findsq(x, y+1);
        const txtleft = findsq(x-1, y);
        var sq = document.getElementById(txt);
        alert(sq.classList);
        if (txtup=="none" || sq.classList.contains("plyer1") || document.getElementById(txtup).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="up";});
        }
        if (txtright=="none" || sq.classList.contains("plyer2") || document.getElementById(txtright).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="right";});
        }
        if (txtdown=="none" || sq.classList.contains("plyer3") || document.getElementById(txtdown).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="down";});
        }
        if (txtleft=="none" || sq.classList.contains("plyer4") || document.getElementById(txtleft).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="left";});
        }
        alert(directions);
      }

      function clearMaze() {
        path=[];
        row=5;
        col=5;
        bestfootforward = true;
        var squares = document.getElementsByTagName("td");
        for (s1=0; s1<squares.length; s1++) {
            squares[s1].innerHTML = "";
            squares[s1].style.color = "black";
        }
      }

      function pathDoomed() {
        doomed = false;
        for (p1 in bible) {
            if (bible[p1].length>=path.length) {
                samepath = true;
                wayout = false;
                for (d1 in bible[p1]) {
                    if (d1<path.length-1) {
                        if (bible[p1][d1]!=path[d1]) {
                            samepath = false;
                        }
                    } else if (d1<bible[p1].length-1) {
                        if (samepath && !bible[p1][d1].includes("!")) {
                            wayout = true;
                        }
                    } else if (d1==bible[p1].length-1 && d1!=path.length-1) {
                        if (samepath && !wayout && bible[p1][d1].includes("!")) {
                            doomed = true;
                        }
                    } 
                    
                }
            }
            
        }
    
        return doomed;
      }

      function nextStep() {
        if (bestfootforward) {
            walkMaze(row, col);
            bestfootforward = false;
        } else {
            stepMaze();
            bestfootforward = true;
        }
      }

      function walkMaze(x1, y1) {

        var r = x1;
        var c = y1;

        var directions=["left","right","up","down"];

        const txt = findsq(r,c);
        const txtup = findsq(r-1, c);
        const txtright = findsq(r, c+1);
        const txtdown = findsq(r+1, c);
        const txtleft = findsq(r, c-1);
        
        var sq = document.getElementById(txt);
        sq.innerHTML="*";
        if (r==5 && c==5) {
            sq.style.color = "green";
        }
        if (txtup=="none" || sq.classList.contains("plyer1") || document.getElementById(txtup).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="up";});
        }
        if (txtright=="none" || sq.classList.contains("plyer2") || document.getElementById(txtright).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="right";});
        }
        if (txtdown=="none" || sq.classList.contains("plyer3") || document.getElementById(txtdown).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="down";});
        }
        if (txtleft=="none" || sq.classList.contains("plyer4") || document.getElementById(txtleft).innerHTML=="*") {
            directions = directions.filter(function (value) {return value!="left";});
        }

        directions.sort(function(){return 0.5 - Math.random()});

        if (directions.length>0) {
            if (directions.length==1) {
                path.push(directions[0]+"!");
            } else {
                path.push(directions[0]);
                doomed = pathDoomed();
                if(doomed) {
                    path.pop();
                    path.push(directions[1]);
                }
                doomed = pathDoomed();
                if (doomed && directions.length==3) {
                    path.pop();
                    path.push(directions[2]);
                }
            } 
        } else {
            sq.style.color = "red";
            bible.push(path);
            bible.push(["//"]);
            return false;
        }
      }

      function stepMaze() {
        doomed = pathDoomed();
        direction = path[path.length-1];
        const txt = findsq(row,col);
        var sq = document.getElementById(txt);
        if (direction.includes("up") && !doomed) {
            row--;
        } else if (direction.includes("right") && !doomed) {
            col++;
        } else if (direction.includes("down") && !doomed) {
            row++;
        } else if (direction.includes("left")  && !doomed) {
            col--;
        } else {
            sq.style.color = "red";
            bible.push(path);
            bible.push(["//"]);
            return false;
        }

      }
	

    </script>
  </body>

</html>
